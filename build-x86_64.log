STEP 1/31: FROM rockylinux:8.7
STEP 2/31: COPY shim-unsigned-x64-15.7-1.el8.src.rpm /
--> Using cache fe7af935aa4c42b693ddf6bd4843e3e604b0c5c306aec6c6becc6dd39389e79f
--> fe7af935aa4c
STEP 3/31: RUN dnf -y update
--> Using cache 4f4765e23c68f493df522397b86c1f5694598421f37710ebec6b56fff381ace4
--> 4f4765e23c68
STEP 4/31: RUN dnf -y install gcc make elfutils-libelf-devel git
--> Using cache e96606c3e7db05e464326730a6f35bfe58bdba16cd1aaddf89542d32099ef4fd
--> e96606c3e7db
STEP 5/31: RUN dnf -y install openssl openssl-devel pesign dos2unix
--> Using cache ca3df88d22492841a65a48c99e1433248f97e9006324920da112696f7fb719a8
--> ca3df88d2249
STEP 6/31: RUN dnf -y install rpm-build
--> Using cache 83d8cacc1cbd93f7a93f773f4e3543ab8484052c97f35efd9e33d03fef07ab4f
--> 83d8cacc1cbd
STEP 7/31: RUN rpm --define '_topdir /var/tmp/build-shim-unsigned-x64-15.7-1.el8.src.rpm' -ivh /shim-unsigned-x64-15.7-1.el8.src.rpm
--> Using cache 40c3e6b2f9df17781d5aedf7732088f38b8e53aa61eff0b2486b6669608457f1
--> 40c3e6b2f9df
STEP 8/31: RUN sed -i 's/linux32 -B/linux32/g' /var/tmp/build-shim-unsigned-x64-15.7-1.el8.src.rpm/SPECS/shim-unsigned-x64.spec
--> Using cache c2de913db83eb36f7d4edd1eb713557d26370bfe015f9b08635a9c6a00988390
--> c2de913db83e
STEP 9/31: RUN rpmbuild --define '_topdir /var/tmp/build-shim-unsigned-x64-15.7-1.el8.src.rpm' -ba /var/tmp/build-shim-unsigned-x64-15.7-1.el8.src.rpm/SPECS/shim-unsigned-x64.spec
--> Using cache c7b202cf2ba5db8a84c3f5c4763eb67aefecd79bc81d7b0b1bce2b3f780b5da4
--> c7b202cf2ba5
STEP 10/31: COPY shimia32.efi /
--> Using cache ee3b7c59963d1292e122717d927d4e40b69193520824a5bbca50a0577f1b47e8
--> ee3b7c59963d
STEP 11/31: COPY shimx64.efi /
--> Using cache c54b19b7796a8b38c2f8ed28b51d9780ffa7550b16d2a6c9d50480d61870b2fb
--> c54b19b7796a
STEP 12/31: RUN ls -la /var/tmp/build-shim-unsigned-x64-15.7-1.el8.src.rpm/RPMS/x86_64/
--> Using cache 6a900da3b4b599196eb8175cdaccaec75434218d73809966808656bda6194435
--> 6a900da3b4b5
STEP 13/31: RUN rpm2cpio /var/tmp/build-shim-unsigned-x64-15.7-1.el8.src.rpm/RPMS/x86_64/shim-unsigned-ia32-15.7-1.el8.x86_64.rpm  | cpio -diu
--> Using cache 3447ee37ee2c8630df418582f4c9f249bad33cf61cbfce3969d64c5deb6ddcb1
--> 3447ee37ee2c
STEP 14/31: RUN rpm2cpio /var/tmp/build-shim-unsigned-x64-15.7-1.el8.src.rpm/RPMS/x86_64/shim-unsigned-x64-15.7-1.el8.x86_64.rpm | cpio -diu
--> Using cache 75004bc7baa6eed6584167039c37c07805a1a0fee41e0e3ed7735c1ef39eaf0d
--> 75004bc7baa6
STEP 15/31: RUN ls -l /*.efi ./usr/share/shim/15.7-1.el8/*/shim*.efi
--> Using cache 74ec79e41907b16666104a6281036b4488a070c8ca05b684955c0626352e6021
--> 74ec79e41907
STEP 16/31: RUN sha256sum ./usr/share/shim/15.7-1.el8/x64/shimx64.efi ./usr/share/shim/15.7-1.el8/ia32/shimia32.efi /shimia32.efi /shimx64.efi
--> Using cache c12943bb325ed1560c1bf2d79504a1693bf2bc1277d06292e96a146ff3596563
--> c12943bb325e
STEP 17/31: RUN hexdump -Cv ./usr/share/shim/15.7-1.el8/x64/shimx64.efi > built-x64.hex
--> Using cache ec5188aea9f49de0562efeafcd1f776a07f0884e6600ac9f8a0465095f939f6a
--> ec5188aea9f4
STEP 18/31: RUN hexdump -Cv ./usr/share/shim/15.7-1.el8/ia32/shimia32.efi > built-ia32.hex
--> Using cache c420d0d932ce78e7ce69dba5b80578c01cd3f11e287e1b5ac9daa015d7f172e9
--> c420d0d932ce
STEP 19/31: RUN hexdump -Cv /shimia32.efi > orig-ia32.hex
--> Using cache a5233a3d87acc38386311b660783906c0e6a3e4809b476292acd67611d99b388
--> a5233a3d87ac
STEP 20/31: RUN hexdump -Cv /shimx64.efi > orig-x64.hex
--> Using cache 043844e2d69b48aa4e55264631ce51c1cfe4a8dd4c619342de47e973eb004341
--> 043844e2d69b
STEP 21/31: RUN objdump -h /usr/share/shim/15.7-1.el8/x64/shimx64.efi
--> Using cache ba4e0fbfe0fe9b04019e172cc6c30671a2b49e163704076a6b968b53e3a751d4
--> ba4e0fbfe0fe
STEP 22/31: RUN objdump -h /usr/share/shim/15.7-1.el8/ia32/shimia32.efi
--> Using cache 31f01c29f2921a6240a68f316b31980308181970145befce30bbc27ba598b35e
--> 31f01c29f292
STEP 23/31: RUN diff -u orig-ia32.hex built-ia32.hex
--> Using cache a9a263fc364c5f09dc0aa72fd9cf797cbd7395d0d5d9aa7510f6ee474c07d22e
--> a9a263fc364c
STEP 24/31: RUN diff -u orig-x64.hex built-x64.hex
--> Using cache 5d4d6d4033be3daab799a67dff09709cef3eeb8033541027af530b421a4f6e34
--> 5d4d6d4033be
STEP 25/31: RUN cmp ./usr/share/shim/15.7-1.el8/x64/shimx64.efi /shimx64.efi
--> Using cache bbd2b08a58bb310f30f17ec3f045de7aeb1cd9bd9e1e1ec81283c671b2ea739d
--> bbd2b08a58bb
STEP 26/31: RUN cmp ./usr/share/shim/15.7-1.el8/ia32/shimia32.efi /shimia32.efi
--> Using cache f20376cafcd14f8433ed75f319cb90c7a780c91792e9377860534d3c6941eeeb
--> f20376cafcd1
STEP 27/31: RUN pesign -h -P -i /usr/share/shim/15.7-1.el8/ia32/shimia32.efi
--> Using cache 95eaab420483e8e7d83d00d2aca1a5af8842876ad5214a3bc4538ee85a485dfe
--> 95eaab420483
STEP 28/31: RUN pesign -h -P -i /shimia32.efi
--> Using cache 1c61886700dc6f3b8b8a3a60ff3257557968c02b3511e3a2862051c6dc1a9ea7
--> 1c61886700dc
STEP 29/31: RUN pesign -h -P -i /usr/share/shim/15.7-1.el8/x64/shimx64.efi
--> Using cache e3b853cde1be66673a33332fa3f009bac99a82f4b08c145c26c59d9dae7f967c
--> e3b853cde1be
STEP 30/31: RUN pesign -h -P -i /shimx64.efi
--> Using cache 37111a678e4e0a907bac851e2f651e0e45c84a9fb56ddf6bfec9e0de18f333ed
--> 37111a678e4e
STEP 31/31: RUN sha256sum /usr/share/shim/15.7-1.el8/x64/shimx64.efi /shimx64.efi /usr/share/shim/15.7-1.el8/ia32/shimia32.efi /shimia32.efi
--> Using cache 39e8692af1a398829d3c7909433462e3ad03b73b508595345d23e1668ecdeb64
--> 39e8692af1a3
39e8692af1a398829d3c7909433462e3ad03b73b508595345d23e1668ecdeb64
